<!DOCTYPE HTML>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="ja">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
  integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
  crossorigin=""/>
<style>
  html,body,#map {
    width:100%;
    height:100%;
    padding:0;
    margin:0;
    
  }

</style>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-15457703-9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-15457703-9');
</script>
</head>
<body>
  <div id="map">
  </div>
   <!-- Make sure you put this AFTER Leaflet's CSS -->
   <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
     integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
     crossorigin=""></script>

<script>

  (async()=>{
    let initLat = 34.678395;
    let initLon =  135.4601305;

    let loc = await new Promise((resolve,reject)=>{
      if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition((position)=> {
          resolve([position.coords.latitude, position.coords.longitude]);
        },(e)=>reject(e));
      } else {
        resolve ([initLat,initLon]);
      }
    });
    let map = L.map('map').setView(loc,18);
    //地理院地図レイヤー追加
    L.tileLayer(
      'http://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png',
      {
        attribution: "<a href='http://www.gsi.go.jp/kikakuchousei/kikakuchousei40182.html' target='_blank'>国土地理院</a>"
      }
    ).addTo(map);
    L.marker(loc).addTo(map);

  })();


</script>
</body>  
</html>
